{% extends "base.html" %}
{% block title %}Presence {{ date }} - {{ classe.code }}{% endblock %}
{% block content %}
<style>
  .panel { background: var(--panel); border: 1px solid var(--border); border-radius: 14px; padding: 14px; box-shadow: var(--shadow); margin-bottom: 12px; }
  table { width: 100%; border-collapse: collapse; }
  th, td { padding: 8px; border: 1px solid var(--border); font-size: 0.92rem; }
  thead { background: rgba(15,139,141,0.08); }
  .pill { display: inline-block; padding: 6px 10px; border-radius: 999px; border: 1px solid var(--border); }
</style>

<h1 class="h4 mb-2">Presence {{ date }} - {{ classe.code }} - {{ classe.intitule_formation }}</h1>
<div class="panel">
  <div>Total enquetes : {{ total }} | Presents : {{ presents }} | Absents : {{ absents }} | Apprenants actifs : {{ actifs }}</div>
</div>

<div class="panel">
  <div style="max-height:480px; overflow:auto;">
    <table>
      <thead>
        <tr>
          <th>Apprenant</th>
          <th>Statut</th>
          <th>Remarques</th>
        </tr>
      </thead>
      <tbody>
        {% for p in presences %}
        <tr>
          <td>{{ p.apprenant }}</td>
          <td><span class="pill">{% if p.presence == "PR" %}Present{% else %}Absent{% endif %}</span></td>
          <td>{{ p.remarques|default:"-" }}</td>
        </tr>
        {% empty %}
        <tr><td colspan="3" style="text-align:center; color:var(--muted);">Aucune presence.</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
